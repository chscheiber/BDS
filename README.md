# Final BDS Project Project_ 33

## About our Project
The goal of our BDS Project is to answer the following research question:
"How is the sentiment of Donald Trump's tweets influenced by the spread of the corona virus in the United States?"

## CEO Perspective
To provide a high level overview about the research question we decided to generate a D3js Dashboard
to visualize the spread of the corona virus in the United States over time in comparison
to Donald Trump's opinion on the corona virus. The opinion of Donald Trump is calculated using a
sentiment analysis on a subset of his tweets. This subset contains all tweets issued by him which
contain at least one predefined term related to the Covid-19 pandemic.

## Data Engineer 
To create a reusable app all the data we are using is provided via a REST API. 
This data is generated by an ETL-Pipeline which queries, transforms and provides Donald Trumps tweets and up-to-date
data concerning the corona virus issued by de NY Times. Furthermore we added a small Admin Panel (/admin.html) 
with which a manual update of the Corona data as well as the Tweet data can be made. 

### Project Structure
![Project Structure](/img/Diagram.jpg)

## Implementation
For the implementation of our project we are using a Full Stack approach with Python and Flask running in the backend
and a HTML/JS/CSS Frontend. The Visualizations were created with D3js, the styling is done via bootstrap. 
When the application is started the newest data on corona cases and deaths per US county is being downloaded 
from the NY Times GitHub repo. In the next step we query new Tweets from Donald Trump 
and store them in /Data/Tweets/@realDonaldTrump.csv. The Corona data and the Tweet data can also be manually updated 
via the admin panel (/admin.html). Then we are doing a sentiment analysis on all Tweets issued by Donald Trump 
and a separate sentiment analysis on tweets which contain one of the following Corona related Terms: <br>
["corona", "covid", "vaccine", "virus", "pandemic", "coronavirus", "covid-19", "plague"]<br>
The sentiment analysis is using a rule based approached based on TextBlob rather than a machine learning based approach.
This is because the style and language of Donald Trump's tweets severely differences from regular tweets which a ML based
model is usually trained on.<br>
All this data is served by our Flask Application app.py via a REST-API. The documentation concerning the available 
Routes can be found below. 

## Running the demo
1. Install requirements using: pip install -r requirements.txt
2. Add an .env file in the same folder as app.py 
3. Run app.py to start a Flask Server
4. Open localhost:5000 in Browser
---
.env:<br>
consumer_key = <consumer_key><br>
consumer_secret = <consumer_secret><br>
access_token = <access_token><br>
access_token_secret = <access_token_secret><br>

## API
Our API offers the following routes:

/corona
- Returns all cases and deaths for all counties and all dates (Basically the us-counties.csv data in JSON format)

/corona/\<county>
- Returns all cases and deaths for all dates in the specified county
    * County must be specified as given in the us-counties.csv file. (Case-sensitive!)
    
/corona/\<county>/\<date>
- Returns all cases and deaths for the specified date in the specified county
    * County must be specified as given in the us-counties.csv file. (Case-sensitive!)
    * Date must be specified in the following format: YYYY-MM-DD

/corona_date/\<date>
- Returns all cases and deaths for all counties on the specified date
    * Date must be specified in the following format: YYYY-MM-DD

/aggregated/\<date>
- Returns all cases and deaths aggregated per county from the start date up to the specified date
    * Date must be specified in the following format: YYYY-MM-DD

/corona_tweets/\<date>
- Returns all tweets by Donald Trump containing corona terms up to the specified date
    * Date must be specified in the following format: YYYY-MM-DD

/all_tweets/\<date>
- Returns all tweets by Donald Trump up to the specified date
    * Date must be specified in the following format: YYYY-MM-DD

/start_date
- Returns the start date for visualization

/end_date
- Returns the end date for viz

/counties
- Returns all US counties